<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Lameck Mukabana | Portfolio</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;background:#0d1117;color:#e6edf3;line-height:1.6}
header{padding:2rem;text-align:center;background:#161b22}
header h1{font-size:2.5rem;margin-bottom:.5rem;color:#58a6ff}
header p{color:#8b949e;font-size:1.2rem}

#projects-section{padding:2rem;max-width:1000px;margin:0 auto}
#projects-section h2{font-size:2rem;color:#58a6ff;margin-bottom:1rem;text-align:center}
#projects-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:1.5rem;list-style:none}
#projects-list li{background:#161b22;padding:1rem;border-radius:10px;transition:transform .2s, box-shadow .2s}
#projects-list li:hover{transform:translateY(-5px);box-shadow:0 5px 20px rgba(0,0,0,.5)}
#projects-list img{max-width:100%;border-radius:5px;margin-top:.5rem}
.project-buttons{margin-top:.5rem;display:flex;gap:.5rem}
.project-buttons a{padding:.5rem 1rem;background:#58a6ff;color:#0d1117;border-radius:5px;text-decoration:none;transition:background .2s}
.project-buttons a:hover{background:#1f6feb}

#contact{padding:2rem;max-width:600px;margin:2rem auto;background:#161b22;border-radius:10px}
#contact h2{color:#58a6ff;margin-bottom:1rem;text-align:center}
#contact form{display:flex;flex-direction:column;gap:.5rem}
#contact input,#contact textarea,#contact button{padding:10px;border:none;border-radius:5px}
#contact input,#contact textarea{background:#0d1117;color:#e6edf3}
#contact button{background:#58a6ff;color:#0d1117;font-weight:bold;cursor:pointer;transition:background .2s}
#contact button:hover{background:#1f6feb}

footer{text-align:center;padding:1rem;margin-top:2rem;color:#8b949e;font-size:.9rem}
</style>
</head>
<body>

<header>
<h1>Lameck Mukabana</h1>
<p>Developer & Portfolio Showcase</p>
</header>

<section id="projects-section">
<h2>My Projects</h2>
<ul id="projects-list"></ul>
</section>

<section id="contact">
<h2>Contact Me</h2>
<form id="contactForm">
<input type="text" id="name" placeholder="Your Name" required>
<input type="email" id="email" placeholder="Your Email" required>
<textarea id="message" placeholder="Your Message" rows="4" required></textarea>
<button type="submit">Send Message</button>
<p id="formMsg"></p>
</form>
</section>

<footer>
&copy; 2026 Lameck Mukabana. All rights reserved.
</footer>

<script>
// Supabase connection
const SUPABASE_URL = "https://isoxqxakxhqcjoqqbswn.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_2Jv93KvSyoKsFfTRKa1VOw__JMkimwW";
const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

// Load Projects dynamically
async function loadProjects(){
  const { data, error } = await supabase.from('projects').select('*').order('id', {ascending:true});
  if(error){console.error(error); return;}
  const ul = document.getElementById("projects-list");
  ul.innerHTML = '';
  data.forEach(p=>{
    const li = document.createElement('li');
    li.innerHTML = `
      <h3>${p.name}</h3>
      <p>${p.description||''}</p>
      ${p.image_url?`<img src="${p.image_url}" alt="${p.name}">`:''}
      <div class="project-buttons">
        ${p.demo_url?`<a href="${p.demo_url}" target="_blank">Live Demo</a>`:''}
        ${p.github_url?`<a href="${p.github_url}" target="_blank">GitHub</a>`:''}
      </div>
    `;
    ul.appendChild(li);
  });
}
loadProjects();

// Contact Form Submission
document.getElementById("contactForm").addEventListener("submit", async(e)=>{
  e.preventDefault();
  const name = document.getElementById("name").value;
  const email = document.getElementById("email").value;
  const message = document.getElementById("message").value;

  const { data, error } = await supabase.from('messages').insert([{name,email,message}]);
  if(error){document.getElementById("formMsg").innerText="Failed to send message"; console.error(error);}
  else{
    document.getElementById("formMsg").innerText="Message sent!";
    document.getElementById("contactForm").reset();
  }
});
</script>

</body>
</html>
